var ca=Math.PI,da=2*ca,L=1e-6,la=da-L;function ea(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ia(){return new ea()}ea.prototype=ia.prototype={constructor:ea,moveTo:function(a,e){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+e)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,e){this._+="L"+(this._x1=+a)+","+(this._y1=+e)},quadraticCurveTo:function(a,e,f,k){this._+="Q"+ +a+","+ +e+","+(this._x1=+f)+","+(this._y1=+k)},bezierCurveTo:function(a,e,f,k,j,p){this._+="C"+ +a+","+ +e+","+ +f+","+ +k+","+(this._x1=+j)+","+(this._y1=+p)},arcTo:function(a,e,f,k,j){a=+a,e=+e,f=+f,k=+k,j=+j;var p=this._x1,n=this._y1,b=f-a,d=k-e,c=p-a,o=n-e,g=c*c+o*o;if(j<0)throw new Error("negative radius: "+j);if(this._x1===null)this._+="M"+(this._x1=a)+","+(this._y1=e);else if(g>L)if(!(Math.abs(o*b-d*c)>L)||!j)this._+="L"+(this._x1=a)+","+(this._y1=e);else{var i=f-p,r=k-n,q=b*b+d*d,w=i*i+r*r,m=Math.sqrt(q),x=Math.sqrt(g),u=j*Math.tan((ca-Math.acos((q+g-w)/(2*m*x)))/2),t=u/x,s=u/m;Math.abs(t-1)>L&&(this._+="L"+(a+t*c)+","+(e+t*o)),this._+="A"+j+","+j+",0,0,"+ +(o*i>c*r)+","+(this._x1=a+s*b)+","+(this._y1=e+s*d)}},arc:function(a,e,f,k,j,p){a=+a,e=+e,f=+f,p=!!p;var n=f*Math.cos(k),b=f*Math.sin(k),d=a+n,c=e+b,o=1^p,g=p?k-j:j-k;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+d+","+c:(Math.abs(this._x1-d)>L||Math.abs(this._y1-c)>L)&&(this._+="L"+d+","+c);if(!f)return;g<0&&(g=g%da+da),g>la?this._+="A"+f+","+f+",0,1,"+o+","+(a-n)+","+(e-b)+"A"+f+","+f+",0,1,"+o+","+(this._x1=d)+","+(this._y1=c):g>L&&(this._+="A"+f+","+f+",0,"+ +(g>=ca)+","+o+","+(this._x1=a+f*Math.cos(j))+","+(this._y1=e+f*Math.sin(j)))},rect:function(a,e,f,k){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+e)+"h"+ +f+"v"+ +k+"h"+-f+"Z"},toString:function(){return this._}};function y(a){return function e(){return a}}var ja=Math.abs,v=Math.atan2,M=Math.cos,ma=Math.max,fa=Math.min,F=Math.sin,P=Math.sqrt,A=1e-12,Q=Math.PI,V=Q/2,W=2*Q;function na(a){return a>1?0:a<-1?Q:Math.acos(a)}function ka(a){return a>=1?V:a<=-1?-V:Math.asin(a)}function oa(a){return a.innerRadius}function pa(a){return a.outerRadius}function qa(a){return a.startAngle}function ra(a){return a.endAngle}function sa(a){return a&&a.padAngle}function ta(a,e,f,k,j,p,n,b){var d=f-a,c=k-e,o=n-j,g=b-p,i=g*d-o*c;return i*i<A?void 0:(i=(o*(e-p)-g*(a-j))/i,[a+i*d,e+i*c])}function X(a,e,f,k,j,p,n){var b=a-f,d=e-k,c=(n?p:-p)/P(b*b+d*d),o=c*d,g=-c*b,i=a+o,r=e+g,q=f+o,w=k+g,m=(i+q)/2,x=(r+w)/2,u=q-i,t=w-r,s=u*u+t*t,B=j-p,z=i*w-q*r,H=(t<0?-1:1)*P(ma(0,B*B*s-z*z)),I=(z*t-u*H)/s,C=(-z*u-t*H)/s,D=(z*t+u*H)/s,E=(-z*u+t*H)/s,h=I-m,l=C-x,J=D-m,K=E-x;return h*h+l*l>J*J+K*K&&(I=D,C=E),{cx:I,cy:C,x01:-o,y01:-g,x11:I*(j/B-1),y11:C*(j/B-1)}}function ua(){var a=oa,e=pa,f=y(0),k=null,j=qa,p=ra,n=sa,b=null;function d(){var c,o,g=+a.apply(this,arguments),i=+e.apply(this,arguments),r=j.apply(this,arguments)-V,q=p.apply(this,arguments)-V,w=ja(q-r),m=q>r;b||(b=c=ia()),i<g&&(o=i,i=g,g=o);if(!(i>A))b.moveTo(0,0);else if(w>W-A)b.moveTo(i*M(r),i*F(r)),b.arc(0,0,i,r,q,!m),g>A&&(b.moveTo(g*M(q),g*F(q)),b.arc(0,0,g,q,r,m));else{var x=r,u=q,t=r,s=q,B=w,z=w,H=n.apply(this,arguments)/2,I=H>A&&(k?+k.apply(this,arguments):P(g*g+i*i)),C=fa(ja(i-g)/2,+f.apply(this,arguments)),D=C,E=C,h,l;if(I>A){var J=ka(I/g*F(H)),K=ka(I/i*F(H));(B-=J*2)>A?(J*=m?1:-1,t+=J,s-=J):(B=0,t=s=(r+q)/2),(z-=K*2)>A?(K*=m?1:-1,x+=K,u-=K):(z=0,x=u=(r+q)/2)}var N=i*M(x),O=i*F(x),R=g*M(s),S=g*F(s);if(C>A){var T=i*M(u),U=i*F(u),Y=g*M(t),Z=g*F(t),G;if(w<Q&&(G=ta(N,O,Y,Z,T,U,R,S))){var _=N-G[0],$=O-G[1],aa=T-G[0],ba=U-G[1],ga=1/F(na((_*aa+$*ba)/(P(_*_+$*$)*P(aa*aa+ba*ba)))/2),ha=P(G[0]*G[0]+G[1]*G[1]);D=fa(C,(g-ha)/(ga-1)),E=fa(C,(i-ha)/(ga+1))}}z>A?E>A?(h=X(Y,Z,N,O,i,E,m),l=X(T,U,R,S,i,E,m),b.moveTo(h.cx+h.x01,h.cy+h.y01),E<C?b.arc(h.cx,h.cy,E,v(h.y01,h.x01),v(l.y01,l.x01),!m):(b.arc(h.cx,h.cy,E,v(h.y01,h.x01),v(h.y11,h.x11),!m),b.arc(0,0,i,v(h.cy+h.y11,h.cx+h.x11),v(l.cy+l.y11,l.cx+l.x11),!m),b.arc(l.cx,l.cy,E,v(l.y11,l.x11),v(l.y01,l.x01),!m))):(b.moveTo(N,O),b.arc(0,0,i,x,u,!m)):b.moveTo(N,O),!(g>A)||!(B>A)?b.lineTo(R,S):D>A?(h=X(R,S,T,U,g,-D,m),l=X(N,O,Y,Z,g,-D,m),b.lineTo(h.cx+h.x01,h.cy+h.y01),D<C?b.arc(h.cx,h.cy,D,v(h.y01,h.x01),v(l.y01,l.x01),!m):(b.arc(h.cx,h.cy,D,v(h.y01,h.x01),v(h.y11,h.x11),!m),b.arc(0,0,g,v(h.cy+h.y11,h.cx+h.x11),v(l.cy+l.y11,l.cx+l.x11),m),b.arc(l.cx,l.cy,D,v(l.y11,l.x11),v(l.y01,l.x01),!m))):b.arc(0,0,g,s,t,m)}b.closePath();if(c)return b=null,c+""||null}return d.centroid=function(){var c=(+a.apply(this,arguments)+ +e.apply(this,arguments))/2,o=(+j.apply(this,arguments)+ +p.apply(this,arguments))/2-Q/2;return[M(o)*c,F(o)*c]},d.innerRadius=function(c){return arguments.length?(a=typeof c==="function"?c:y(+c),d):a},d.outerRadius=function(c){return arguments.length?(e=typeof c==="function"?c:y(+c),d):e},d.cornerRadius=function(c){return arguments.length?(f=typeof c==="function"?c:y(+c),d):f},d.padRadius=function(c){return arguments.length?(k=c==null?null:typeof c==="function"?c:y(+c),d):k},d.startAngle=function(c){return arguments.length?(j=typeof c==="function"?c:y(+c),d):j},d.endAngle=function(c){return arguments.length?(p=typeof c==="function"?c:y(+c),d):p},d.padAngle=function(c){return arguments.length?(n=typeof c==="function"?c:y(+c),d):n},d.context=function(c){return arguments.length?(b=c==null?null:c,d):b},d}function va(a,e){return e<a?-1:e>a?1:e>=a?0:NaN}function wa(a){return a}function xa(){var a=wa,e=va,f=null,k=y(0),j=y(W),p=y(0);function n(b){var d,c=b.length,o,g,i=0,r=new Array(c),q=new Array(c),w=+k.apply(this,arguments),m=Math.min(W,Math.max(-W,j.apply(this,arguments)-w)),x,u=Math.min(Math.abs(m)/c,p.apply(this,arguments)),t=u*(m<0?-1:1),s;for(d=0;d<c;++d)(s=q[r[d]=d]=+a(b[d],d,b))>0&&(i+=s);for(e!=null?r.sort(function(B,z){return e(q[B],q[z])}):f!=null&&r.sort(function(B,z){return f(b[B],b[z])}),d=0,g=i?(m-c*t)/i:0;d<c;++d,w=x)o=r[d],s=q[o],x=w+(s>0?s*g:0)+t,q[o]={data:b[o],index:d,value:s,startAngle:w,endAngle:x,padAngle:u};return q}return n.value=function(b){return arguments.length?(a=typeof b==="function"?b:y(+b),n):a},n.sortValues=function(b){return arguments.length?(e=b,f=null,n):e},n.sort=function(b){return arguments.length?(f=b,e=null,n):f},n.startAngle=function(b){return arguments.length?(k=typeof b==="function"?b:y(+b),n):k},n.endAngle=function(b){return arguments.length?(j=typeof b==="function"?b:y(+b),n):j},n.padAngle=function(b){return arguments.length?(p=typeof b==="function"?b:y(+b),n):p},n}export{ua as arc,xa as pie};
